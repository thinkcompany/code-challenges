function get_checked_value(){for(var e=$("input[name=fareCalcWhere]"),r=0;r<e.length;r++)if(e[r].checked)return $(e[r]).val()}function calculate_fare(e,r){var n=e.zones,t=get_current_zone(n,r.zone),a=t.fares,o=get_current_price(a,r.where,r.type,r.rides);$("#fareCalcTotal").html(format_price(o))}function format_price(e){var r=e.toString().split(".");return 1===r.length?r[0]+".00":1===r[1].split("").length?r[0]+"."+r[1]+"0":e}function get_current_price(e,r,n,t){for(var a=0;a<e.length;a++)if(e[a].purchase===r&&e[a].type===n)return 10===parseInt(t)&&document.getElementById("stationKiosk").checked?e[a].price:e[a].price*t}function error(e){window.scrollTo(0,0),$(".innerError").html(e),$("#error").animate({opacity:1},2e3,function(){setTimeout(function(){$("#error").animate({opacity:0},2e3,function(){$(".innerError").html("")})},2e3)})}function get_current_zone(e,r){for(var n=0;n<e.length;n++)if(parseInt(e[n].zone)===parseInt(r))return e[n]}$(document).ready(function(){$("#fares").on("input change",function(){parseInt($(this).val())}),$(".fareCalcField").on("change blur",function(){var e=$("#fares").val(),r=$("#fareCalcWhen").val();10===parseInt(e)&&document.getElementById("stationKiosk").checked&&(r="anytime");var n={zone:$("#fareCalcZones").val(),type:r,where:get_checked_value(),rides:e};parseInt(e)>0?$.ajax({type:"GET",url:"includes/js/septaFareCalcJSON.json",statusCode:{400:function(){error("400 error")},501:function(){error("501 error")},200:function(e){calculate_fare(e,n)}},failure:function(){error()}}):$("#fareCalcTotal").html("0.00")}),$(".fareCalcRadioButton").on("change",function(){var e=$(this).val();$.ajax({type:"GET",url:"includes/js/septaFareCalcJSON.json",statusCode:{400:function(){error("400 error")},501:function(){error("501 error")},200:function(r){$("#infoWhere").html(r.info[e])}},failure:function(){error()}})})});